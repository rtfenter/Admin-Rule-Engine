<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Admin Rule Engine Playground</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="page-header">
      <div class="page-header-inner">
        <h1>Admin Rule Engine Playground</h1>
        <p class="tagline">
          Explore how admin-configured rules stack, conflict, and resolve across environments.
        </p>
      </div>
    </header>

    <main class="main">
      <section class="panel panel-left">
        <div class="panel-header">
          <h2>Scenario & Rule Packs</h2>
        </div>

        <section class="section-block">
          <div class="section-title-row">
            <h3 class="section-title">Scenarios</h3>
            <p class="section-hint">Choose what kind of request you&#39;re testing.</p>
          </div>
          <div class="chip-row" id="scenarioChips"></div>
        </section>

        <section class="section-block">
          <div class="section-title-row">
            <h3 class="section-title">Rule Packs</h3>
            <p class="section-hint">Toggle which policies are active.</p>
          </div>
          <div class="chip-row chip-row-wrap" id="packChips"></div>
        </section>

        <section class="section-block">
          <div class="section-title-row">
            <h3 class="section-title">Active Rule Stack</h3>
            <p class="section-hint">
              Combined rules from all active packs, ordered from lowest to highest priority.
            </p>
          </div>
          <div class="rule-stack-summary" id="ruleStackSummary"></div>
          <div class="rule-stack" id="ruleStack"></div>
        </section>
      </section>

      <section class="panel panel-right">
        <div class="panel-header panel-header-right">
          <div>
            <h2>Rule Evaluation</h2>
            <p class="panel-subtitle">
              Run the selected scenario against your active rule packs.
            </p>
          </div>
          <div class="panel-actions">
            <button class="btn btn-secondary" id="resetButton">Reset</button>
            <button class="btn btn-primary" id="evaluateButton">
              Run Evaluation
            </button>
          </div>
        </div>

        <section class="section-block">
          <div class="summary-row" id="scenarioSummary">
            <!-- Filled by JS -->
          </div>
        </section>

        <section class="section-block">
          <div class="section-title-row">
            <h3 class="section-title">Matching Rules</h3>
            <p class="section-hint">
              Rules that match this scenario, sorted by priority (lower numbers win).
            </p>
          </div>

          <div class="rule-table" id="ruleTable">
            <!-- Filled by JS -->
          </div>
        </section>

        <section class="section-block">
          <div class="section-title-row">
            <h3 class="section-title">Decision & Explanation</h3>
          </div>

          <div class="decision-row">
            <div class="decision-pill decision-pill-idle" id="decisionPill">
              <span class="decision-label">Waiting for evaluation</span>
            </div>
            <div class="decision-meta" id="decisionMeta">
              Select a scenario and rule packs, then run evaluation.
            </div>
          </div>

          <div class="explanation" id="explanation"></div>
        </section>

        <section class="section-block">
          <div class="trace-header">
            <span class="trace-title">Evaluation Trace</span>
            <button class="btn btn-secondary btn-sm" id="toggleTraceButton">
              Show trace
            </button>
          </div>
          <pre class="trace-log" id="traceLog"></pre>
        </section>
      </section>
    </main>

    <footer class="page-footer">
      Admin Rule Engine Playground · Client-side only · No data stored or sent.
    </footer>

    <script src="app.js"></script>
  </body>
</html>
